[{"cursor":"Y3Vyc29yOnYyOpHOErb9Ww==","node":{"number":1,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOEslX7A==","node":{"number":2,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOEtWnHg==","node":{"number":3,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOEtay8g==","node":{"number":4,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOEtsq5A==","node":{"number":5,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOEuExEg==","node":{"number":6,"reviewThreads":{"nodes":[{"comments":{"nodes":[{"body":"跟`final`没关系，本质原因是因为`Integer`是不可变的，因此每次`value+=i`的时候都创建了一个新的`Integer`对象。每个线程锁住的对象不一样，就完全没有意义了。","author":{"login":"blindpirate"},"commit":{"oid":"158887fa639ac8e8994ff486f3b5c8be70cbcc51"},"pullRequest":{"files":{"nodes":[{"path":"src/main/java/com/github/hcsp/multithread/Counter.java"}]}}}]},"line":14,"originalLine":14,"originalStartLine":null,"startLine":null,"startDiffSide":null}]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOEuSqSw==","node":{"number":7,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOEudc3g==","node":{"number":8,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOEudxcA==","node":{"number":9,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOEu0rzA==","node":{"number":10,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOEu6r9A==","node":{"number":11,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOEu7qYg==","node":{"number":12,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOEwdWbg==","node":{"number":13,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOEwe2Ig==","node":{"number":14,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOExwPtA==","node":{"number":15,"reviewThreads":{"nodes":[{"comments":{"nodes":[{"body":"直接把synchronized关键字加到方法上，一样的效果哟","author":{"login":"blindpirate"},"commit":{"oid":"e4830bc277409c0b22fc6a32c8e602160af1f9f5"},"pullRequest":{"files":{"nodes":[{"path":"src/main/java/com/github/hcsp/multithread/Counter.java"}]}}}]},"line":12,"originalLine":12,"originalStartLine":null,"startLine":null,"startDiffSide":null}]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOEy3diA==","node":{"number":16,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOEzcm3g==","node":{"number":17,"reviewThreads":{"nodes":[{"comments":{"nodes":[{"body":"虽然能工作，但是这是非常非常不好的实践。在JDK的实现中，值为1的Integer是一个被整个JVM共享的对象，因此拿它来当锁是非常危险的行为。你需要新建一个对象，使得这个对象不会泄漏到同一个类外面去。","author":{"login":"blindpirate"},"commit":{"oid":"c4e368fc3d7e342a2b08921a49383384bb4a0337"},"pullRequest":{"files":{"nodes":[{"path":"src/main/java/com/github/hcsp/multithread/Counter.java"}]}}}]},"line":5,"originalLine":5,"originalStartLine":null,"startLine":null,"startDiffSide":null}]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOE1ghPw==","node":{"number":18,"reviewThreads":{"nodes":[{"comments":{"nodes":[{"body":"嗯，其实没必要新建一个锁，只要把这个方法标注成`synchronized`就行了，用当前对象当锁","author":{"login":"blindpirate"},"commit":{"oid":"9df8e6820c5e679107c392dfe9456ff79da7be52"},"pullRequest":{"files":{"nodes":[{"path":"src/main/java/com/github/hcsp/multithread/Counter.java"}]}}}]},"line":13,"originalLine":13,"originalStartLine":null,"startLine":null,"startDiffSide":null}]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOE15LeQ==","node":{"number":19,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOE15hhw==","node":{"number":20,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOE18XYQ==","node":{"number":21,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOE18YiQ==","node":{"number":22,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOE3W-JA==","node":{"number":23,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOE5BSUA==","node":{"number":24,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOE5afSA==","node":{"number":25,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOE5fcOQ==","node":{"number":26,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOE52m-A==","node":{"number":27,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOE61MXA==","node":{"number":28,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOE7DN3Q==","node":{"number":29,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOE7o34A==","node":{"number":30,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOE78xQw==","node":{"number":31,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOE8EWEA==","node":{"number":32,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOE8dG4Q==","node":{"number":33,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOE9j5Cw==","node":{"number":34,"reviewThreads":{"nodes":[{"comments":{"nodes":[{"body":"这样实际上可以把整个方法变成一个`synchronized`方法了","author":{"login":"hcsp-bot"},"commit":{"oid":"c7a413b46871ba316790eefd379b23c1b03b54eb"},"pullRequest":{"files":{"nodes":[{"path":"src/main/java/com/github/hcsp/multithread/Counter.java"}]}}}]},"line":20,"originalLine":20,"originalStartLine":null,"startLine":null,"startDiffSide":null}]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOE9xZzw==","node":{"number":35,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOE-AkGQ==","node":{"number":36,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOE-G1Cw==","node":{"number":37,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOFA_zdg==","node":{"number":38,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOFBjt_A==","node":{"number":39,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOFF5cog==","node":{"number":40,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOFF7VCg==","node":{"number":41,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOFF-9CA==","node":{"number":42,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOFLijnw==","node":{"number":43,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOFRMh3Q==","node":{"number":44,"reviewThreads":{"nodes":[{"comments":{"nodes":[{"body":"虽然这样好使，但是是很危险的行为，因为这样相当于把身家性命压在了\"lock\"字符串对象身上，这个字符串虽然在绝大多数情况下是唯一的，但是仍然很危险。最好的办法是创建一个全局的对象，保证唯一。","author":{"login":"hcsp-bot"},"commit":{"oid":"041c6d9a3229c486db1f43b34ff4ddac1046fe2b"},"pullRequest":{"files":{"nodes":[{"path":"src/main/java/com/github/hcsp/multithread/Counter.java"}]}}}]},"line":12,"originalLine":12,"originalStartLine":null,"startLine":null,"startDiffSide":null}]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOFRevXg==","node":{"number":45,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOFRl2lQ==","node":{"number":46,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOFTO6vQ==","node":{"number":47,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOFTf6Jg==","node":{"number":48,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOFUO91w==","node":{"number":49,"reviewThreads":{"nodes":[{"comments":{"nodes":[{"body":"当作锁的对象最好是final的，IDEA会用黄色警告提示你的。","author":{"login":"hcsp-bot"},"commit":{"oid":"4eebdaf60bef3b817e1f9b9ae4f1d13938699cf8"},"pullRequest":{"files":{"nodes":[{"path":"src/main/java/com/github/hcsp/multithread/Counter.java"}]}}}]},"line":5,"originalLine":5,"originalStartLine":null,"startLine":null,"startDiffSide":null}]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOFUSZIA==","node":{"number":50,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOFV-NOA==","node":{"number":51,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOFX3OLQ==","node":{"number":52,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOFYuWLQ==","node":{"number":53,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOFZCRrQ==","node":{"number":54,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOFZCwvA==","node":{"number":55,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOFbhkAQ==","node":{"number":56,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOFcJNuw==","node":{"number":57,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOFc-7Ng==","node":{"number":58,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOFeSu9w==","node":{"number":59,"reviewThreads":{"nodes":[{"comments":{"nodes":[{"body":"最好使用非static的对象当锁，思考一下二者的区别？","author":{"login":"hcsp-bot"},"commit":{"oid":"ff4b01f5c592b8d0791c5d454816536524979000"},"pullRequest":{"files":{"nodes":[{"path":"src/main/java/com/github/hcsp/multithread/Counter.java"}]}}}]},"line":6,"originalLine":6,"originalStartLine":null,"startLine":null,"startDiffSide":null}]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOFfXYkg==","node":{"number":60,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOFf0bvA==","node":{"number":61,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOFf9VFg==","node":{"number":62,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOFglWMw==","node":{"number":63,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOFhfEGg==","node":{"number":64,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOFigp9w==","node":{"number":65,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOFi8Dsw==","node":{"number":66,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOFjjjkw==","node":{"number":67,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOFlVI0g==","node":{"number":68,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOFlhh3g==","node":{"number":69,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOFmkkTQ==","node":{"number":70,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOFp_-Lw==","node":{"number":71,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOFqFsvA==","node":{"number":72,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOFqXm4g==","node":{"number":73,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOFrvIKg==","node":{"number":74,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOFuTBXw==","node":{"number":75,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOFucB3A==","node":{"number":76,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOFwJv0Q==","node":{"number":77,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOFzCgBA==","node":{"number":78,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOF0EuDA==","node":{"number":79,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOF0u1OA==","node":{"number":80,"reviewThreads":{"nodes":[{"comments":{"nodes":[{"body":"没错。","author":{"login":"hcsp-bot"},"commit":{"oid":"179f9b25f1ff52c3057d05857919332b66da0a6f"},"pullRequest":{"files":{"nodes":[{"path":"src/main/java/com/github/hcsp/multithread/Counter.java"}]}}}]},"line":63,"originalLine":63,"originalStartLine":null,"startLine":null,"startDiffSide":null}]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOF0z9xg==","node":{"number":81,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOF1qBnQ==","node":{"number":82,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOF1sJQQ==","node":{"number":83,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOF132Pg==","node":{"number":84,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOF3XI5g==","node":{"number":85,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOF3YuRg==","node":{"number":86,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOF44aRQ==","node":{"number":87,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOF52x8Q==","node":{"number":88,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOF7_uHA==","node":{"number":89,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOF9MkUg==","node":{"number":90,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOF-ISqQ==","node":{"number":91,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOF_db2A==","node":{"number":92,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOF_8ctw==","node":{"number":93,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOGAiJ0A==","node":{"number":94,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOGCMvOA==","node":{"number":95,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOGDt6gg==","node":{"number":96,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOGHL9SA==","node":{"number":97,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOGI7WiQ==","node":{"number":98,"reviewThreads":{"nodes":[]},"headRepository":null}},{"cursor":"Y3Vyc29yOnYyOpHOGLzrLg==","node":{"number":99,"reviewThreads":{"nodes":[]},"headRepository":null}}]